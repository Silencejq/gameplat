<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>统计图表-WeAdmin Frame型后台管理系统-WeAdmin 1.0</title>
        <meta name="renderer" content="webkit|ie-comp|ie-stand">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta http-equiv="Cache-Control" content="no-siteapp" />
        <link rel="stylesheet" href="../../static/css/font.css">
        <link rel="stylesheet" href="../../static/css/weadmin.css">
    </head>
    <body>
        <div class="weadmin-body">
			<blockquote class="layui-elem-quote">
				根据指数平滑法St=ayt+(1-a)St-1 
<br>
•St--时间t的平滑值； 
<br>
•yt--时间t的实际值；
<br>
•St − 1--时间t-1的平滑值；
<br>
•a--平滑常数，其取值范围为[0,1]
<br>
			</blockquote>
            <blockquote class="layui-elem-quote">
                预测短期平稳略有上升
            </blockquote>
			<blockquote class="layui-elem-quote">
				<button class="layui-btn" onclick='tableToExcel()'>导出EXCEL线性回归分析法分析预测</button>
			</blockquote>
            <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
            <div id="main" style="width: 100%;height:400px;"></div>
            <blockquote class="layui-elem-quote">
                				<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
                					<legend>请输入你要查询的时间段</legend>
                				</fieldset>
                				<form class="layui-form layui-form-pane" action="">
                
                					<div class="layui-form-item">
                						<div class="layui-inline">
                							<label class="layui-form-label">起始日期</label>
                							<div class="layui-input-block">
                								<input type="text" name="date" id="date" autocomplete="off" class="layui-input">
                							</div>
                						</div>
                
                						<div class="layui-inline">
                							<label class="layui-form-label">终止日期</label>
                							<div class="layui-input-block">
                								<input type="text" name="date1" id="date1" autocomplete="off" class="layui-input">
                							</div>
                						</div>
                
                					</div>
                
                					<div class="layui-form-item">
                						<button class="layui-btn" lay-submit="" lay-filter="demo1">跳转式提交</button>
                					</div>
                				</form>
            </blockquote>
        </div>
        <script src="//cdn.bootcss.com/echarts/4.0.2/echarts.min.js"></script>
        <script src="../../lib/layui/layui.all.js" type="text/javascript" charset="utf-8"></script>
        		<script type="text/javascript">
        			layui.use(['form', 'layedit', 'laydate'], function() {
        				var form = layui.form,
        					layer = layui.layer,
        					laydate = layui.laydate;
        
        				//日期
        				laydate.render({
        					elem: '#date'
        				});
        				laydate.render({
        					elem: '#date1'
        				});
        
        
        
        
        				//监听提交
        				form.on('submit(demo1)', function(data) {
        					layer.alert(JSON.stringify(data.field), {
        						title: '最终的提交信息'
        					})
        					return false;
        				});
        
        				
        
        
        			});
        		</script>
				<script type="text/javascript">
					var arr=[60,80,50,70];
					
					var c=function(a,n,arr)
					{
						
						if(a==0){
						return arr[0];
						}else if(a>0){
						return n*arr[a]+(1-n)*c(a-1,n,arr);
							
						0.2*70+0.5*68.28
						}
						
						
					};
					console.log(c(3,0.9,arr));
					console.log(0.5*70+0.5*68.28);
				</script>
		<script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        data = [["2018-06-05",116],["2018-06-06",129],["2018-06-07",135],["2018-06-08",86],["2018-06-09",73],["2018-06-10",85],["2018-06-11",73],["2018-06-12",68],["2018-06-13",92],["2018-06-14",130],["2018-06-15",245],["2018-06-16",139],["2018-06-17",115],["2018-06-18",111],["2018-06-19",309],["2018-06-20",206],["2018-06-21",137],["2018-06-22",128],["2018-06-23",85],["2018-06-24",94],["2018-06-25",71],["2018-06-26",106],["2018-06-27",84],["2018-06-28",93],["2018-06-29",85],["2018-06-30",73],["2018-07-01",83],["2018-07-02",125],["2018-07-03",107],["2018-07-04",82],["2018-07-05",44],["2018-07-06",72],["2018-07-07",106],["2018-07-08",107],["2018-07-09",66],["2018-07-10",91],["2018-07-11",92],["2018-07-12",113],["2018-07-13",107],["2018-07-14",131],["2018-07-15",111],["2018-07-16",64],["2018-07-17",69],["2018-07-18",88],["2018-07-19",77],["2018-07-20",83],["2018-07-21",111],["2018-07-22",57],["2018-07-23",55],["2018-07-24",60]];

var dateList = data.map(function (item) {
    return item[0];
});
var valueList = data.map(function (item) {
    return item[1];
});

option = {

    // Make gradient line here
    visualMap: [{
        show: false,
        type: 'continuous',
        seriesIndex: 0,
        min: 0,
        max: 400
    }, {
        show: false,
        type: 'continuous',
        seriesIndex: 1,
        dimension: 0,
        min: 0,
        max: dateList.length - 1
    }],


    title: [{
        left: 'center',
        text: 'Gradient along the y axis'
    }, {
        top: '55%',
        left: 'center',
        text: 'Gradient along the x axis'
    }],
    tooltip: {
        trigger: 'axis'
    },
    xAxis: [{
        data: dateList
    }, {
        data: dateList,
        gridIndex: 1
    }],
    yAxis: [{
        splitLine: {show: false}
    }, {
        splitLine: {show: false},
        gridIndex: 1
    }],
    grid: [{
        bottom: '60%'
    }, {
        top: '60%'
    }],
    series: [{
        type: 'line',
        showSymbol: false,
        data: valueList
    }, {
        type: 'line',
        showSymbol: false,
        data: valueList,
        xAxisIndex: 1,
        yAxisIndex: 1
    }]
};



        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>
<script>
            
    function tableToExcel(){
      //要导出的json数据
      var jsonData = [
        {
          时间序列:'1',
          销售额:'12',
          
        },
        {
        时间序列:'1',
        销售额:'12',
        
        },
        {
        时间序列:'1',
        销售额:'12',
        
        },
        {
        时间序列:'1',
        销售额:'12',
        
        },
      ]
      //列标题，逗号隔开，每一个逗号就是隔开一个单元格
      let str = `时间序列,销售额\n`;
      //增加\t为了不让表格显示科学计数法或者其他格式
      for(let i = 0 ; i < jsonData.length ; i++ ){
        for(let item in jsonData[i]){
            str+=`${jsonData[i][item] + '\t'},`;     
        }
        str+='\n';
      }
      //encodeURIComponent解决中文乱码
      let uri = 'data:text/csv;charset=utf-8,\ufeff' + encodeURIComponent(str);
      //通过创建a标签实现
      var link = document.createElement("a");
      link.href = uri;
      //对下载的文件命名
      link.download =  "json数据表.csv";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }
 
</script>
    </body>
</html>